{% load widget_tweaks %}
{% load core_filters %}
{% for hidden_field in form.hidden_fields %}
{{ hidden_field }}
{% endfor %}

{% if form.non_field_errors %}
<div class="alert alert-danger" role="alert">
    {% for error in form.non_field_errors %}
    {{ error }}
    {% endfor %}
</div>
{% endif %}

<div class="form-group">
    <label for="id_title"><b>{{ form.title.label }}: </b></label>
    {% render_field form.title class="form-control" %}
    <small class="form-text text-muted">{{ form.title.help_text|safe }}</small>
    {% if form.title.errors %}
    {% for error in form.title.errors %}
    <small class="text-danger">{{ error }}</small>
    {% endfor %}
    {% endif %}
</div>
<div class="form-group">
    <label for="id_description"><b>{{ form.description.label }}: </b></label>
    {% render_field form.description class="form-control" %}
    <small class="form-text text-muted">{{ form.description.help_text|safe }}</small>
    {% if form.description.errors %}
    {% for error in form.description.errors %}
    <small class="text-danger">{{ error }}</small>
    {% endfor %}
    {% endif %}
</div>
<div class="form-group">
    <label for="id_duration"><b>{{ form.duration.label }}:</b></label>
    {% render_field form.duration class="form-control" %}
    <small class="form-text text-muted">{{ form.duration.help_text|safe }}</small>
    {% if form.duration.errors %}
    {% for error in form.duration.errors %}
    <small class="text-danger">{{ error }}</small>
    {% endfor %}
    {% endif %}
</div>
<div class="form-group">
    <label for="id_title"><b>{{ form.problems.label }}: </b></label>
    <small class="form-text text-muted">{{ form.problems.help_text|safe }}</small>
    {% if form.problems.errors %}
    {% for error in form.problems.errors %}
    <small class="text-danger">{{ error }}</small>
    {% endfor %}
    {% endif %}
    <ul>
        <br />
        <div id="selected-problems">

            <div id="selected-problems-list">
                <b>Selected problems: </b>
            </div>
            <hr />
            <button type="submit" class="btn btn-outline-success btn-sm">Submit</button>

            <hr />
        </div>

        <div class="row">
            {% for value, label, problem in form.problems.field.choices %}
            <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <li>
                    <label class="checkbox-label-container">
                        <input type="checkbox" value="{{ value }}" name="problems">
                        <span class="checkmark"></span><a href="https://codechef.com/problems/{{problem.code}}" target="_blank">
                            <strong>{{ problem.name }}</strong>
                            <span id="problem-{{ value }}">({{ problem.code }})</span></a><br />
                        <span>{{ problem.contest_name }}</span><br />
                        <span>Successful submissions (in contest): {{ problem.contest_successful_submissions }}</span><br />
                        <span>Tags: {{ problem.tags|load_list_items }}</span>
                    </label>
                </li>
            </div>
            {% endfor %}
        </div>
    </ul>
</div>